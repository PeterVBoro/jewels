(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(20)},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(8),l=n.n(o),i=(n(15),n(2)),c=n(3),s=n(5),u=n(4),d=n(1),h=n(6);n(16),n(17);var f=function(e){return r.a.createElement("div",{className:"jewel-container",id:e.index},r.a.createElement("i",{style:e.color,className:"fas fa-gem",onClick:function(){return e.onclick(e.index)}}))},m=(n(18),n(19),function(e){function t(e){var n;Object(i.a)(this,t);var a=["rgb(0,0,225)","rgb(0,255,0)","rgb(255,0,0)","rgb(0,255,225)","rgb(255,0,225)","rgb(255,255,0)"];return(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).generateNewJewels=n.generateNewJewels.bind(Object(d.a)(n)),n.getRandomColor=n.getRandomColor.bind(Object(d.a)(n)),n.generateBoard=n.generateBoard.bind(Object(d.a)(n)),n.handleClicked=n.handleClicked.bind(Object(d.a)(n)),n.state={colors:a,board:n.generateBoard(a)},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleClicked",value:function(e){if(this.props.inGame){var t=document.querySelector(".clicked"),n=document.getElementById(e);if(t){var a=Math.floor(e/this.state.board.length),r=e-a*this.state.board.length,o=Math.floor(parseInt(t.id)/this.state.board.length),l=parseInt(t.id)-o*this.state.board.length;if(this.isNext(a,r,o,l)){var i=this.switchJewels(a,r,o,l);this.updateBoard(i)}else n.classList.add("clicked");t.classList.remove("clicked")}else n.classList.add("clicked")}}},{key:"updateBoard",value:function(e){for(var t=this,n=0;n<e.length;n++)for(var a=0;a<e[n].length;a++){var r=this.countJewels(e,n,a);if(r.leftRight.length>=3||r.upDown.length>=3){var o=function(){var n;return n=r.leftRight.length>r.upDown.length?r.leftRight:r.upDown,t.setState({colors:t.state.colors,board:e},function(){var a=t;t.getJewelElem(n,e).then(t.fadeOut).then(t.generateNewJewels).then(t.addJewels).then(function(e){a.props.updateScore(e.nJewels),a.setState({colors:a.state.colors,board:e.newBoard}),a.updateBoard(a.state.board)})}),{v:void 0}}();if("object"===typeof o)return o.v}}}},{key:"getJewelElem",value:function(e,t){return new Promise(function(n){for(var a={elements:[],board:t,jewels:e},r=0;r<e.length;r++){var o=String(e[r].row*t.length+e[r].col),l=document.getElementById(o).children[0];a.elements.push(l)}n(a)})}},{key:"fadeOut",value:function(e){return new Promise(function(t){var n=e.elements;n.forEach(function(e){e.style.opacity=1});var a=+new Date;!function r(){var o=+new Date;if(n.forEach(function(e){e.style.opacity=+e.style.opacity-(o-a)/150}),a=+new Date,+n[0].style.opacity>0)window.requestAnimationFrame&&requestAnimationFrame(r)||setTimeout(r,16);else if(+n[0].style.opacity<=0){var l={board:e.board,jewels:e.jewels};t(l)}}()})}},{key:"generateNewJewels",value:function(e){var t=this;return new Promise(function(n){for(var a=[],r=0;r<e.jewels.length;r++)a.push(t.getRandomColor(t.state.colors));e.newJewels=a,n(e)})}},{key:"addJewels",value:function(e){return new Promise(function(t){var n=e.board,a=e.newJewels,r=e.jewels;function o(e,t,n){var a=String(e*n+t);document.getElementById(a).children[0].style.opacity=1}if(r.every(function(e,t,n){return e.col===n[0].col})){for(var l=r[0].col,i=r[0].row-1,c=r[r.length-1].row;i>=0;i--,c--)n[c][l]=e.board[i][l],o(c,l,e.board.length);for(var s=0;s<a.length;s++)n[s][l]=a[s],o(s,l,e.board.length)}else{for(var u=r[0].row,d=r[0].col;d<=r[r.length-1].col;d++){for(var h=u;h>0;h--)n[h][d]=e.board[h-1][d];o(u,d,e.board.length)}for(var f=r[0].col,m=0;f<=r[r.length-1].col;f++,m++)n[0][f]=a[m],o(u,f,e.board.length)}t({newBoard:n,nJewels:a.length})})}},{key:"countJewels",value:function(e,t,n){for(var a={upDown:[{row:t,col:n}],leftRight:[{row:t,col:n}]},r=-1;r<=1;r+=2)if(!(t+r<0||t+r>e.length||n+r<0||n+r>e.length)){var o=1;if(t+r*o>=0&&t+r*o<e.length)for(;e[t][n]===e[t+r*o][n]&&(a.upDown.push({row:t+r*o,col:n}),!(t+r*++o<0||t+r*o>=e.length)););var l=1;if(n+r*l>=0&&n+r*l<e[t].length)for(;e[t][n]===e[t][n+r*l]&&(a.leftRight.push({row:t,col:n+r*l}),!(n+r*++l<0||n+r*l>e[t].length)););}return a}},{key:"isNext",value:function(e,t,n,a){return e===n&&(t+1===a||t-1===a)||t===a&&(e+1===n||e-1===n)}},{key:"switchJewels",value:function(e,t,n,a){var r=this.copy(this.state.board),o=r[e][t];return r[e][t]=r[n][a],r[n][a]=o,r}},{key:"copy",value:function(e){var t,n,a;for(a in t=Array.isArray(e)?[]:{},e)n=e[a],t[a]="object"===typeof n?this.copy(n):n;return t}},{key:"getRandomColor",value:function(e){return e[Math.floor(Math.random()*e.length)]}},{key:"generateNextColor",value:function(e,t,n,a){for(var r=this.getRandomColor(t),o={left:!0,up:!0},l=-1;l>=-2;l--)a+l<0?o.left=!1:r!==e[n][a+l]&&(o.left=!1),n+l<0?o.up=!1:r!==e[n+l][a]&&(o.up=!1);if(o.left&&o.up||o.up)for(;r===e[n-1][a];)r=this.getRandomColor(t);else if(o.left)for(;r===e[n][a-1];)r=this.getRandomColor(t);return r}},{key:"generateBoard",value:function(e){for(var t=new Array(9),n=0;n<t.length;n++){t[n]=new Array(9);for(var a=0;a<t[n].length;a++)t[n][a]=this.generateNextColor(t,e,n,a)}return t}},{key:"createHTMLBoard",value:function(){for(var e=[],t=0;t<9;t++){for(var n=[],a=0;a<9;a++){var o={color:this.state.board[t][a]};n.push(r.a.createElement(f,{index:9*t+a,color:o,onclick:this.handleClicked}))}e.push(r.a.createElement("div",{className:"row"},n))}return e}},{key:"render",value:function(){return r.a.createElement("div",{id:"board-container"},r.a.createElement("div",{id:"board"},this.createHTMLBoard()))}}]),t}(r.a.Component));function v(e){return r.a.createElement("header",null,r.a.createElement(b,{time:e.time}),r.a.createElement(g,{btnText:e.btnText,handleClick:e.handleClick}),r.a.createElement(w,{score:e.score}))}function b(e){var t=e.time%10,n=Math.floor(e.time/10%10),a=Math.floor(e.time/100);return r.a.createElement("div",{id:"timer-container"},r.a.createElement("p",null,"Time left:",r.a.createElement("span",{id:"timer-min"}," ",a),":",r.a.createElement("span",{id:"timer-sec-tens"},n),r.a.createElement("span",{id:"timer-sec-ones"},t)))}function g(e){return r.a.createElement("div",{id:"play-btn-container"},r.a.createElement("button",{onClick:function(){return e.handleClick()}},e.btnText))}function w(e){var t=e.score%10,n=Math.floor(e.score/10%10),a=Math.floor(e.score/100%10),o=Math.floor(e.score/1e3%10),l=Math.floor(e.score/1e4%10);return r.a.createElement("div",{id:"score-container"},r.a.createElement("p",{id:"score"},"Score:",r.a.createElement("span",null," ",l),r.a.createElement("span",null,o),r.a.createElement("span",null,a),r.a.createElement("span",null,n),r.a.createElement("span",null,t)))}var p=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).updateScore=n.updateScore.bind(Object(d.a)(n)),n.handleClick=n.handleClick.bind(Object(d.a)(n)),n.state={score:0,time:100,btnText:"Play",inGame:!1},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleClick",value:function(){var e=document.querySelector("button");e.classList.remove("fade-in"),e.classList.add("fade-out"),this.setState({score:0,time:100,btnText:this.state.btnText,inGame:!0},this.startTimer())}},{key:"updateScore",value:function(e){this.setState({score:this.state.score+20*e,time:this.state.time,btnText:this.state.btnText,inGame:this.state.inGame})}},{key:"startTimer",value:function(){var e=this,t=function(){var e=document.querySelector("button");e.classList.remove("fade-out"),e.classList.add("fade-in"),clearInterval(n)},n=setInterval(function(){var n=e.state.time;0===n?e.setState({score:e.state.score,time:0,btnText:"Play Again?",inGame:!1},t()):(n=n%100?n-1:n-41,e.setState({score:e.state.score,time:n,btnText:"Play Again?",inGame:!0}))},1e3)}},{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement(v,{time:this.state.time,btnText:this.state.btnText,handleClick:this.handleClick,score:this.state.score}),r.a.createElement(m,{inGame:this.state.inGame,updateScore:this.updateScore}))}}]),t}(r.a.Component);l.a.render(r.a.createElement(p,null),document.getElementById("root"))}],[[9,1,2]]]);
//# sourceMappingURL=main.f7f3a149.chunk.js.map